(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[225],{3243:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,AuthProvider:()=>n});var r=s(5155),a=s(2115);let i=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,a.useState)(!1),[o,l]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),[u,f]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=localStorage.getItem("authToken"),t=localStorage.getItem("user");if(e&&(c(e),n(!0),t))try{l(JSON.parse(t))}catch(e){console.error("Failed to parse user data",e)}f(!1)},[]),(0,r.jsx)(i.Provider,{value:{isAuthenticated:s,user:o,token:d,login:(e,t)=>{localStorage.setItem("authToken",e),c(e),n(!0),t&&(localStorage.setItem("user",JSON.stringify(t)),l(t))},logout:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),c(null),l(null),n(!1)},updateUser:e=>{if(o){let t={...o,...e};localStorage.setItem("user",JSON.stringify(t)),l(t)}}},children:!u&&t})}function o(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3494:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),a=s(2115),i=s(5695),n=s(8482),o=s(9852),l=s(7168),d=s(3243),c=s(4503),u=s(7924),f=s(9597);function m(){let{token:e}=(0,d.A)(),{toast:t}=(0,c.dj)(),s=(0,i.useSearchParams)().get("topic"),[m,h]=(0,a.useState)(s||""),[p,g]=(0,a.useState)([]),[v,x]=(0,a.useState)(!1),[b,y]=(0,a.useState)([]);(0,a.useEffect)(()=>{s?(h(s),N(s)):j(),S()},[s]);let j=async()=>{if(e){x(!0);try{let t=await fetch("https://redditgrambackend.vercel.app//feed/generalfeed",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({})}),s=await t.json();s.executed&&s.data&&(console.log("Fetched general feed:",s.data),g(s.data))}catch(e){console.error("Error fetching feed:",e),t({title:"Error",description:"Failed to load content feed. Please try again.",variant:"destructive"})}finally{x(!1)}}},N=async s=>{if(e&&s.trim()){x(!0);try{let r=await fetch("https://redditgrambackend.vercel.app//feed/specificfeed",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({subreddit:s.trim()})}),a=await r.json();a.executed&&a.data?g(a.data):t({title:"No results found",description:'No content found for "'.concat(s,'". Try a different search term.')})}catch(e){console.error("Error searching feed:",e),t({title:"Error",description:"Failed to search content. Please try again.",variant:"destructive"})}finally{x(!1)}}},S=async()=>{if(e)try{let t=await fetch("https://redditgrambackend.vercel.app//feed/getsavedposts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({})}),s=await t.json();if(s.executed&&s.data){let e=s.data.map(e=>e.subredditid);y(e)}}catch(e){console.error("Error fetching saved posts:",e)}},w=async s=>{if(e)try{let r=b.includes(s.id),a=await fetch("https://redditgrambackend.vercel.app/"+"/feed/".concat(r?"unsavepost":"savepost"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({subredditid:s.id,title:s.title,permalink:s.permalink})});(await a.json()).executed&&(r?(y(b.filter(e=>e!==s.id)),t({title:"Post unsaved",description:"The post has been removed from your saved items."})):(y([...b,s.id]),t({title:"Post saved",description:"The post has been added to your saved items and you earned 50 credits!"})))}catch(e){console.error("Error saving/unsaving post:",e),t({title:"Error",description:"Failed to save/unsave the post. Please try again.",variant:"destructive"})}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Explore Content"})}),(0,r.jsx)(n.Zp,{className:"bg-white/80 backdrop-blur-md border border-white/20",children:(0,r.jsxs)(n.Wu,{className:"pt-6",children:[(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),N(m)},className:"flex gap-2",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(u.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"}),(0,r.jsx)(o.p,{type:"search",placeholder:"Search for a subreddit (e.g., 'programming', 'science')",className:"pl-9",value:m,onChange:e=>h(e.target.value)})]}),(0,r.jsx)(l.$,{type:"submit",disabled:v,children:v?"Searching...":"Search"})]}),(0,r.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>{h("programming"),N("programming")},children:"Programming"}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>{h("science"),N("science")},children:"Science"}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>{h("technology"),N("technology")},children:"Technology"}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>{h("design"),N("design")},children:"Design"}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>{h("business"),N("business")},children:"Business"})]})]})}),(0,r.jsx)("div",{children:v?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(9)].map((e,t)=>(0,r.jsx)(n.Zp,{className:"bg-white/80 backdrop-blur-md border border-white/20 h-64 animate-pulse",children:(0,r.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200"})})},t))}):(0,r.jsx)(r.Fragment,{children:p.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(e=>(0,r.jsx)(f.A,{post:e,isSaved:b.includes(e.id),onSave:()=>w(e)},e.id))}):(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No content found. Try searching for a different topic."})})})})]})}},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(2596),a=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},4503:(e,t,s)=>{"use strict";s.d(t,{dj:()=>f});var r=s(2115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function f(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var r=s(5155),a=s(2115),i=s(9708),n=s(2085),o=s(3999);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:a,size:n,className:s})),ref:t,...c})});d.displayName="Button"},7752:(e,t,s)=>{Promise.resolve().then(s.bind(s,3494))},7924:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>o,wL:()=>u});var r=s(5155),a=s(2115),i=s(3999);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});n.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},9597:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var r=s(5155),a=s(8482),i=s(7168),n=s(2108),o=s(333),l=s(1366),d=s(3786),c=s(6766),u=s(6874),f=s.n(u),m=s(498);function h(e){var t,s,u,h,p,g,v;let{post:x,isSaved:b,onSave:y}=e,j=(null===(t=x.type)||void 0===t?void 0:t.includes("image"))&&(null===(s=x.media)||void 0===s?void 0:s.url),N=(null===(u=x.type)||void 0===u?void 0:u.includes("video"))&&(null===(h=x.media)||void 0===h?void 0:h.url),S=x.text&&x.text.length>0,w=(0,m.m)(new Date(1e3*x.createdUtc),{addSuffix:!0}),T=x.title.length>80?x.title.substring(0,80)+"...":x.title,A=S&&x.text&&x.text.length>120?x.text.substring(0,120)+"...":x.text;return(0,r.jsxs)(a.Zp,{className:"overflow-hidden bg-white/80 backdrop-blur-md border border-white/20 flex flex-col h-full",children:[(0,r.jsx)(a.aR,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ZB,{className:"text-base line-clamp-2",children:T}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Posted by u/",x.author," in r/",x.subreddit," • ",w]})]}),(0,r.jsxs)(i.$,{variant:"ghost",size:"icon",className:b?"text-purple-600":"text-gray-400",onClick:y,children:[(0,r.jsx)(n.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:b?"Unsave":"Save"})]})]})}),(0,r.jsxs)(a.Wu,{className:"pb-2 flex-1",children:[j&&(0,r.jsx)("div",{className:"relative w-full h-40 mb-3 rounded-md overflow-hidden",children:(0,r.jsx)(c.default,{src:(null===(p=x.media)||void 0===p?void 0:p.url)||"/placeholder.svg?height=160&width=320",alt:x.title,fill:!0,className:"object-cover"})}),N&&(0,r.jsx)("div",{className:"relative w-full h-40 mb-3 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:(0,r.jsxs)("video",{width:"320",height:"240",controls:!0,className:"object-cover w-full h-full",children:[(0,r.jsx)("source",{src:(null===(g=x.media)||void 0===g?void 0:g.url)||"/placeholder.mp4",type:"video/mp4"}),(0,r.jsx)("source",{src:(null===(v=x.media)||void 0===v?void 0:v.url)||"/placeholder.ogg",type:"video/ogg"}),"Your browser does not support the video tag."]})}),S&&(0,r.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3",children:A}),!S&&!j&&!N&&(0,r.jsx)("div",{className:"text-sm text-gray-500 italic",children:"No preview available"})]}),(0,r.jsxs)(a.wL,{className:"pt-2 border-t flex justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(o.A,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{children:x.score})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(l.A,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{children:x.numComments})]})]}),(0,r.jsxs)(f(),{href:"/dashboard/post/".concat(x.subredditId),className:"text-xs text-purple-600 hover:underline flex items-center gap-1",children:["View Details",(0,r.jsx)(d.A,{className:"h-3 w-3"})]})]})]})}},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var r=s(5155),a=s(2115),i=s(3999);let n=a.forwardRef((e,t)=>{let{className:s,type:a,...n}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[598,874,106,641,498,441,684,358],()=>t(7752)),_N_E=e.O()}]);