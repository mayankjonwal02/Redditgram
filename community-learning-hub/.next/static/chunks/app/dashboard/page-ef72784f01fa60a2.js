(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{3243:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>l});var r=s(5155),a=s(2115);let i=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,a.useState)(!1),[d,n]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=localStorage.getItem("authToken"),t=localStorage.getItem("user");if(e&&(c(e),l(!0),t))try{n(JSON.parse(t))}catch(e){console.error("Failed to parse user data",e)}h(!1)},[]),(0,r.jsx)(i.Provider,{value:{isAuthenticated:s,user:d,token:o,login:(e,t)=>{localStorage.setItem("authToken",e),c(e),l(!0),t&&(localStorage.setItem("user",JSON.stringify(t)),n(t))},logout:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),c(null),n(null),l(!1)},updateUser:e=>{if(d){let t={...d,...e};localStorage.setItem("user",JSON.stringify(t)),n(t)}}},children:!u&&t})}function d(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(2596),a=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},4503:(e,t,s)=>{"use strict";s.d(t,{dj:()=>h});var r=s(2115);let a=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],o={toasts:[]};function c(e){o=d(o,e),n.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function h(){let[e,t]=r.useState(o);return r.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5621:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),a=s(2115),i=s(8482),l=s(7168),d=s(3243),n=s(4503),o=s(9037);let c=(0,s(9946).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var u=s(6874),h=s.n(u),p=s(9597);function m(){let{user:e,token:t,updateUser:s}=(0,d.A)(),{toast:u}=(0,n.dj)(),[m,x]=(0,a.useState)([]),[f,v]=(0,a.useState)(!0),[g,b]=(0,a.useState)([]);(0,a.useEffect)(()=>{j(),y(),N()},[]);let j=async()=>{try{let e=await fetch("https://redditgrambackend.vercel.app/feed/generalfeed",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({})}),s=await e.json();s.executed&&s.data&&x(s.data.slice(0,6))}catch(e){console.error("Error fetching feed:",e),u({title:"Error",description:"Failed to load content feed. Please try again.",variant:"destructive"})}finally{v(!1)}},y=async()=>{if(t)try{let e=await fetch("https://redditgrambackend.vercel.app/feed/getsavedposts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({})}),s=await e.json();if(s.executed&&s.data){let e=s.data.map(e=>e.subredditid);b(e)}}catch(e){console.error("Error fetching saved posts:",e)}},N=async()=>{if(t)try{let e=await fetch("https://redditgrambackend.vercel.app/feed/fetchcredits",{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}),r=await e.json();r.executed&&s({credits:r.credits})}catch(e){console.error("Error fetching credits:",e)}},w=async e=>{if(t)try{let s=g.includes(e.id),r=await fetch("https://redditgrambackend.vercel.app"+"/feed/".concat(s?"unsavepost":"savepost"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({subredditid:e.id,title:e.title,permalink:e.permalink})});(await r.json()).executed&&(s?(b(g.filter(t=>t!==e.id)),u({title:"Post unsaved",description:"The post has been removed from your saved items."})):(b([...g,e.id]),u({title:"Post saved",description:"The post has been added to your saved items and you earned 50 credits!"}),N()))}catch(e){console.error("Error saving/unsaving post:",e),u({title:"Error",description:"Failed to save/unsave the post. Please try again.",variant:"destructive"})}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,r.jsxs)(i.Zp,{className:"flex-1 bg-white/80 backdrop-blur-md border border-white/20",children:[(0,r.jsxs)(i.aR,{className:"pb-2",children:[(0,r.jsxs)(i.ZB,{className:"text-lg flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"h-5 w-5 text-purple-600"}),"Your Credits"]}),(0,r.jsx)(i.BT,{children:"Earn credits by engaging with content"})]}),(0,r.jsxs)(i.Wu,{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:(null==e?void 0:e.credits)||0}),(0,r.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"Save posts to earn more credits. Use credits to unlock premium content."}),(0,r.jsx)(l.$,{variant:"outline",className:"mt-4",asChild:!0,children:(0,r.jsx)(h(),{href:"/dashboard/credits",children:"View Credit History"})})]})]}),(0,r.jsxs)(i.Zp,{className:"flex-1 bg-white/80 backdrop-blur-md border border-white/20",children:[(0,r.jsxs)(i.aR,{className:"pb-2",children:[(0,r.jsxs)(i.ZB,{className:"text-lg flex items-center gap-2",children:[(0,r.jsx)(c,{className:"h-5 w-5 text-purple-600"}),"Trending Topics"]}),(0,r.jsx)(i.BT,{children:"Popular topics in the community"})]}),(0,r.jsx)(i.Wu,{children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)(h(),{href:"/dashboard/explore?topic=technology",children:(0,r.jsx)(l.$,{variant:"outline",size:"sm",children:"Technology"})}),(0,r.jsx)(h(),{href:"/dashboard/explore?topic=science",children:(0,r.jsx)(l.$,{variant:"outline",size:"sm",children:"Science"})}),(0,r.jsx)(h(),{href:"/dashboard/explore?topic=programming",children:(0,r.jsx)(l.$,{variant:"outline",size:"sm",children:"Programming"})}),(0,r.jsx)(h(),{href:"/dashboard/explore?topic=design",children:(0,r.jsx)(l.$,{variant:"outline",size:"sm",children:"Design"})}),(0,r.jsx)(h(),{href:"/dashboard/explore?topic=business",children:(0,r.jsx)(l.$,{variant:"outline",size:"sm",children:"Business"})})]})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Recent Content"}),(0,r.jsx)(l.$,{variant:"outline",asChild:!0,children:(0,r.jsx)(h(),{href:"/dashboard/explore",children:"View All"})})]}),f?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((e,t)=>(0,r.jsx)(i.Zp,{className:"bg-white/80 backdrop-blur-md border border-white/20 h-64 animate-pulse",children:(0,r.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-200"})})},t))}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,r.jsx)(p.A,{post:e,isSaved:g.includes(e.id),onSave:()=>w(e)},e.id))})]})]})}},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var r=s(5155),a=s(2115),i=s(9708),l=s(2085),d=s(3999);let n=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:o=!1,...c}=e,u=o?i.DX:"button";return(0,r.jsx)(u,{className:(0,d.cn)(n({variant:a,size:l,className:s})),ref:t,...c})});o.displayName="Button"},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>n,Zp:()=>l,aR:()=>d,wL:()=>u});var r=s(5155),a=s(2115),i=s(3999);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});l.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});d.displayName="CardHeader";let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});n.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},9037:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},9349:(e,t,s)=>{Promise.resolve().then(s.bind(s,5621))},9597:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var r=s(5155),a=s(8482),i=s(7168),l=s(2108),d=s(333),n=s(1366),o=s(3786),c=s(6766),u=s(6874),h=s.n(u),p=s(498);function m(e){var t,s,u,m,x,f,v;let{post:g,isSaved:b,onSave:j}=e,y=(null===(t=g.type)||void 0===t?void 0:t.includes("image"))&&(null===(s=g.media)||void 0===s?void 0:s.url),N=(null===(u=g.type)||void 0===u?void 0:u.includes("video"))&&(null===(m=g.media)||void 0===m?void 0:m.url),w=g.text&&g.text.length>0,S=(0,p.m)(new Date(1e3*g.createdUtc),{addSuffix:!0}),T=g.title.length>80?g.title.substring(0,80)+"...":g.title,A=w&&g.text&&g.text.length>120?g.text.substring(0,120)+"...":g.text;return(0,r.jsxs)(a.Zp,{className:"overflow-hidden bg-white/80 backdrop-blur-md border border-white/20 flex flex-col h-full",children:[(0,r.jsx)(a.aR,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ZB,{className:"text-base line-clamp-2",children:T}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Posted by u/",g.author," in r/",g.subreddit," â€¢ ",S]})]}),(0,r.jsxs)(i.$,{variant:"ghost",size:"icon",className:b?"text-purple-600":"text-gray-400",onClick:j,children:[(0,r.jsx)(l.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:b?"Unsave":"Save"})]})]})}),(0,r.jsxs)(a.Wu,{className:"pb-2 flex-1",children:[y&&(0,r.jsx)("div",{className:"relative w-full h-40 mb-3 rounded-md overflow-hidden",children:(0,r.jsx)(c.default,{src:(null===(x=g.media)||void 0===x?void 0:x.url)||"/placeholder.svg?height=160&width=320",alt:g.title,fill:!0,className:"object-cover"})}),N&&(0,r.jsx)("div",{className:"relative w-full h-40 mb-3 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:(0,r.jsxs)("video",{width:"320",height:"240",controls:!0,className:"object-cover w-full h-full",children:[(0,r.jsx)("source",{src:(null===(f=g.media)||void 0===f?void 0:f.url)||"/placeholder.mp4",type:"video/mp4"}),(0,r.jsx)("source",{src:(null===(v=g.media)||void 0===v?void 0:v.url)||"/placeholder.ogg",type:"video/ogg"}),"Your browser does not support the video tag."]})}),w&&(0,r.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3",children:A}),!w&&!y&&!N&&(0,r.jsx)("div",{className:"text-sm text-gray-500 italic",children:"No preview available"})]}),(0,r.jsxs)(a.wL,{className:"pt-2 border-t flex justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(d.A,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{children:g.score})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(n.A,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{children:g.numComments})]})]}),(0,r.jsxs)(h(),{href:"/dashboard/post/".concat(g.subredditId),className:"text-xs text-purple-600 hover:underline flex items-center gap-1",children:["View Details",(0,r.jsx)(o.A,{className:"h-3 w-3"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[598,874,106,641,498,441,684,358],()=>t(9349)),_N_E=e.O()}]);